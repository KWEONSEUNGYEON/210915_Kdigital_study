<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <button class="p" id="fire">불</button>
    <button class="p" id="water">물</button>
    <button class="p" id ="leap">풀</button>
    <br>
    <!-- button.g#${$세대}*8 -->
    <button class="g" id="1">1세대</button>
    <button class="g" id="2">2세대</button>
    <button class="g" id="3">3세대</button>
    <button class="g" id="4">4세대</button>
    <button class="g" id="5">5세대</button>
    <button class="g" id="6">6세대</button>
    <button class="g" id="7">7세대</button>
    <button class="g" id="8">8세대</button>
    <br>
    <button id="p_battle">배틀 시작</button>
    <h1>결과는?</h1>
    <h1 id="my_battle_result"></h1>
    <h1>나의 포켓몬</h1>
    <img id="me">
    <h1>너의 포켓몬</h1>
    <img id="pc">
    <script>
        let my_type = "-"
        let my_gen = "-"
        const FIRE = 0
        const WATER = 1
        const LEAP = 2
        let type = []
        type[FIRE] = "https://i3.ruliweb.com/img/20/07/21/1736e7e3a3f3f4644.jpg"
        type[WATER] = "https://image.fmkorea.com/files/attach/new/20201216/425547776/3053531398/3263633195/e73f43cc7018d727bc23d9d9870642b0.png"
        type[LEAP] = "https://i3.ruliweb.com/img/20/07/21/1736e7e35a53f4644.png"
        type[3] = "https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcTAg4QdJEAfNI4VlL-Y_WhUyaBF7jD4dP33Cw&usqp=CAU"

        function choiceType(choice_type)
        { //내가 클릭한 그 버튼의 id값을 my_type에 넘김
            my_type = choice_type.target.id
            // alert(my_type)
        }
        function choiceGen(choice_gen)
        {
            my_type = choice_gen.target.id
            // alert(my_gen)
        }
        function battle()
        {
            if(my_gen == "-" || my_type == "-")
            {
                alert("세대나 타입 선택하세요")
                return
            }
            let me = document.querySelector("#me")
            let pc = document.querySelector("#pc")

            let pc_type = Math.floor(Math.random()*3)
            let pc_gen = Math.floor(Math.random()*8)+1

            let my_battle_result
                = document.querySelector("#my_battle_result")

            if(pc_gen == 2 && pc_type == LEAP)
                pc.src = type[3]
            else
                pc.src = type[pc_type]

            switch (my_type) {
                case 'fire':
                    me.src = type[FIRE]
                    switch (pc_type) {
                        case FIRE:
                            my_battle_result.innerText
                            ="무승부"
                            break;

                        case WATER:
                            my_battle_result.innerText
                            ="패배"
                            break;

                        case LEAP:
                            my_battle_result.innerText
                            ="승리"
                            break;
                    
                        default:
                            break;
                    }
                    break;
                case 'water':
                    me.src = type[WATER]
                    switch (pc_type) {
                        case FIRE:
                            my_battle_result.innerText
                            ="무승부"
                            break;

                        case WATER:
                            my_battle_result.innerText
                            ="패배"
                            break;
                            
                        case LEAP:
                            if(pc_gen == 2)
                            my_battle_result.innerText
                            ="승리"
                            break;
                    
                        default:
                            break;
                    }
                    break;
                case 'leap':
                        me.src = type[LEAP]
                        switch (pc_type) {
                        case FIRE:
                            my_battle_result.innerText
                            ="무승부"
                            break;

                        case WATER:
                            if(my_gen)
                            {

                            }
                            else
                            {
                            my_battle_result.innerText
                            ="패배"
                            }

                            break;
                            
                        case LEAP:
                            my_battle_result.innerText
                            ="승리"
                            break;
                    
                        default:
                            break;
                    }
                        if(my_gen == 2)
                            me.src = type[3]
                        else
                            me.src = tyep[LEAP]
                        break;
                
                    default:
                        break;
            }
            me.src = type[my_gen]
            pc.src = type[pc_gen]
        }

        let p_types = document.querySelectorAll(".p")
        for(let item of p_types)
            item.onclick = choiceType
        let gens = document.querySelectorAll(".g")
        for(let item of gens)
            item.onclick = choiceGen
        let p_battle = document.querySelector("#p_battle")
        p_battle.onclick = battle

         
    </script>
</body>
</html>